let bywind_cookiesTime=null,bywind_musicPlaying=!1,bywind_keyboard=1,bywind_intype=!1,bywind_showFPS=!1;var selectTextNow="";let lastSayHello="";var bywind={selectText:function(){var e;e=document.selection?document.selection.createRange().text:window.getSelection()+"",selectTextNow=e||""},darkModeStatus:function(){"light"==("dark"===document.documentElement.getAttribute("data-theme")?"dark":"light")?$(".menu-darkmode-text").text("深色模式"):$(".menu-darkmode-text").text("浅色模式")},changeTimeInEssay:function(){document.querySelector("#bber")&&document.querySelectorAll("#bber time").forEach((e=>{const t=e,o=t.getAttribute("datetime");t.innerText=btf.diffDate(o,!0),t.style.display="inline"}))},initIndexEssay:function(){document.querySelector("#bber-talk")&&new Swiper(".swiper-container",{direction:"vertical",loop:!0,autoplay:{delay:3e3,pauseOnMouseEnter:!0}})},onlyHome:function(){var e=window.location.pathname;"/"==(e=decodeURIComponent(e))?$(".only-home").attr("style","display: flex"):$(".only-home").attr("style","display: none")},is_Post:function(){return window.location.href.indexOf("/posts/")>=0},addNavBackgroundInit:function(){var e=0,t=0;document.body&&(e=document.body.scrollTop),document.documentElement&&(t=document.documentElement.scrollTop),0!=(e-t>0?e:t)&&(document.getElementById("page-header").classList.add("nav-fixed"),document.getElementById("page-header").classList.add("nav-visible"),$("#cookies-window").hide())},tagPageActive:function(){var e=window.location.pathname;e=decodeURIComponent(e);if(/\/tags\/.*?\//.test(e)){var t=e.split("/")[2];document.querySelector("#tag-page-tags")&&($("a").removeClass("select"),document.getElementById(t).classList.add("select"))}},categoriesBarActive:function(){document.querySelector("#category-bar")&&$(".category-bar-item").removeClass("select");var e=window.location.pathname;if("/"==(e=decodeURIComponent(e)))document.querySelector("#category-bar")&&document.getElementById("category-bar-home").classList.add("select");else if(/\/categories\/.*?\//.test(e)){var t=e.split("/")[2];document.querySelector("#category-bar")&&document.getElementById(t).classList.add("select")}},addFriendLinksInFooter:function(){fetch("https://moments.bywind.xyz/randomfriend?num=3").then((e=>e.json())).then((e=>{var t=getArrayItems(e,3),o="";for(let e=0;e<t.length;++e){var n=t[e];o+=`<a class='footer-item' href='${n.link}'  target="_blank" rel="noopener nofollow">${n.name}</a>`}o+="<a class='footer-item' href='/link/'>更多</a>",document.getElementById("friend-links-in-footer").innerHTML=o}))},stopImgRightDrag:function(){$("img").on("dragstart",(function(){return!1}))},topPostScroll:function(){if(document.getElementById("recent-post-top")){let e=document.getElementById("recent-post-top");e.addEventListener("mousewheel",(function(t){let o=-t.wheelDelta/2;e.scrollLeft+=o,document.body.clientWidth<1300&&t.preventDefault()}),!1)}},topCategoriesBarScroll:function(){if(document.getElementById("category-bar-items")){let e=document.getElementById("category-bar-items");e.addEventListener("mousewheel",(function(t){let o=-t.wheelDelta/2;e.scrollLeft+=o,t.preventDefault()}),!1)}},sayhi:function(){document.querySelector("#author-info__sayhi")&&(document.getElementById("author-info__sayhi").innerHTML=getTimeState())},addTag:function(){document.querySelector(".bywind-tag-new")&&$(".bywind-tag-new").append('<sup class="bywind-tag bywind-tag-new-view">N</sup>'),document.querySelector(".bywind-tag-hot")&&$(".bywind-tag-hot").append('<sup class="bywind-tag bywind-tag-hot-view">H</sup>')},qrcodeCreate:function(){document.getElementById("qrcode")&&(document.getElementById("qrcode").innerHTML="",new QRCode(document.getElementById("qrcode"),{text:window.location.href,width:250,height:250,colorDark:"#000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H}))},refreshEssayWaterFall:function(){document.querySelector("#waterfall")&&setTimeout((function(){waterfall("#waterfall"),document.getElementById("waterfall").classList.add("show")}),500)},addMediumInEssay:function(){document.querySelector("#waterfall")&&mediumZoom(document.querySelectorAll("[data-zoomable]"))},changeTimeFormat:function(){for(var e=document.getElementsByTagName("time"),t=0;t<e.length;t++){var o,n=e[t].getAttribute("datetime"),a=new Date(n),i=(new Date).getTime()-a.getTime(),l=Math.floor(i/864e5);o=0===l?"最近":1===l?"昨天":2===l?"前天":l<=7?l+"天前":a.getFullYear()!==(new Date).getFullYear()?a.getFullYear()+"/"+(a.getMonth()+1)+"/"+a.getDate():a.getMonth()+1+"/"+a.getDate(),e[t].textContent=o}},downloadImage:function(e,t){rm.hideRightMenu(),0==rm.downloadimging?(rm.downloadimging=!0,btf.snackbarShow("正在下载中，请稍后",!1,1e4),setTimeout((function(){let o=new Image;o.setAttribute("crossOrigin","anonymous"),o.onload=function(){let e=document.createElement("canvas");e.width=o.width,e.height=o.height,e.getContext("2d").drawImage(o,0,0,o.width,o.height);let n=e.toDataURL("image/png"),a=document.createElement("a"),i=new MouseEvent("click");a.download=t||"photo",a.href=n,a.dispatchEvent(i)},o.src=e,btf.snackbarShow("图片已添加盲水印，请遵守版权协议"),rm.downloadimging=!1}),"10000")):btf.snackbarShow("有正在进行中的下载，请稍后再试")},switchCommentBarrage:function(){document.querySelector(".comment-barrage")&&($(".comment-barrage").is(":visible")?($(".comment-barrage").hide(),$(".menu-commentBarrage-text").text("显示热评"),document.querySelector("#consoleCommentBarrage").classList.remove("on"),localStorage.setItem("commentBarrageSwitch","false")):$(".comment-barrage").is(":hidden")&&($(".comment-barrage").show(),$(".menu-commentBarrage-text").text("关闭热评"),document.querySelector("#consoleCommentBarrage").classList.add("on"),localStorage.removeItem("commentBarrageSwitch"))),rm.hideRightMenu()},hidecookie:function(){bywind_cookiesTime=setTimeout((()=>{document.getElementById("cookies-window").classList.add("cw-hide"),setTimeout((()=>{$("#cookies-window").hide()}),1e3)}),3e3)},hideTodayCard:function(){document.getElementById("todayCard")&&document.getElementById("todayCard").classList.add("hide")},changeThemeColor:function(e){null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content",e)},initThemeColor:function(){if(bywind.is_Post())if(0===(window.scrollY||document.documentElement.scrollTop)){let e=getComputedStyle(document.documentElement).getPropertyValue("--bywind-main");bywind.changeThemeColor(e)}else{let e=getComputedStyle(document.documentElement).getPropertyValue("--bywind-background");bywind.changeThemeColor(e)}else{let e=getComputedStyle(document.documentElement).getPropertyValue("--bywind-background");bywind.changeThemeColor(e)}},jumpTo:function(e){$(document).ready((function(){$("html,body").animate({scrollTop:$(e).eq(i).offset().top},500)}))},showLoading:function(){document.querySelector("#loading-box").classList.remove("loaded");let e=getComputedStyle(document.documentElement).getPropertyValue("--bywind-card-bg");bywind.changeThemeColor(e)},hideLoading:function(){document.querySelector("#loading-box").classList.add("loaded")},musicToggle:function(){bywind_musicPlaying?(document.querySelector("#nav-music").classList.remove("playing"),document.getElementById("menu-music-toggle").innerHTML='<i class="hnfont icon-play-fill"></i><span>播放音乐</span>',document.getElementById("nav-music-hoverTips").innerHTML="音乐已暂停",document.querySelector("#consoleMusic").classList.remove("on"),bywind_musicPlaying=!1):(document.querySelector("#nav-music").classList.add("playing"),document.getElementById("menu-music-toggle").innerHTML='<i class="hnfont icon-pause-fill"></i><span>暂停音乐</span>',document.querySelector("#consoleMusic").classList.add("on"),bywind_musicPlaying=!0),document.querySelector("meting-js").aplayer.toggle(),rm.hideRightMenu()},musicSkipBack:function(){document.querySelector("meting-js").aplayer.skipBack(),rm.hideRightMenu()},musicSkipForward:function(){document.querySelector("meting-js").aplayer.skipForward(),rm.hideRightMenu()},musicGetName:function(){for(var e=$(".aplayer-title"),t=[],o=e.length-1;o>=0;o--)t[o]=e[o].innerText;return t[0]},showConsole:function(){document.querySelector("#console").classList.add("show"),bywind.initConsoleState()},hideConsole:function(){document.querySelector("#console").classList.remove("show")},keyboardToggle:function(){bywind_keyboard?(bywind_keyboard=!1,document.querySelector("#consoleKeyboard").classList.remove("on"),localStorage.setItem("keyboardToggle","false")):(bywind_keyboard=!0,document.querySelector("#consoleKeyboard").classList.add("on"),localStorage.setItem("keyboardToggle","true"))},scrollTo:function(e){const t=document.getElementById(e);if(t){const e=t.getBoundingClientRect().top+window.pageYOffset-80,o=window.pageYOffset,n=e-o;let a=null;window.requestAnimationFrame((function e(t){a||(a=t);const i=t-a,l=(c=Math.min(i/0,1))<.5?2*c*c:(4-2*c)*c-1;var c;window.scrollTo(0,o+n*l),i<600&&window.requestAnimationFrame(e)}))}},hideAsideBtn:()=>{const e=document.documentElement.classList;e.contains("hide-aside")?saveToLocal.set("aside-status","show",2):saveToLocal.set("aside-status","hide",2),e.toggle("hide-aside"),e.contains("hide-aside")?document.querySelector("#consoleHideAside").classList.remove("on"):document.querySelector("#consoleHideAside").classList.add("on")},initConsoleState:function(){document.documentElement.classList.contains("hide-aside")?document.querySelector("#consoleHideAside").classList.remove("on"):document.querySelector("#consoleHideAside").classList.add("on")},removeBodyPaceClass:function(){$("body").removeClass(),$("body").addClass("pace-done")},FPSToggle:function(){bywind_showFPS?(bywind_showFPS=!1,document.querySelector("#fps-group").classList.remove("show"),document.querySelector("#consoleFPS").classList.remove("on"),localStorage.setItem("showFPS","false")):(bywind_showFPS=!0,document.querySelector("#fps-group").classList.add("show"),document.querySelector("#consoleFPS").classList.add("on"),localStorage.setItem("showFPS","true"))},toPage:function(){console.log("执行跳转");var e=document.querySelectorAll(".page-number"),t=parseInt(e[e.length-1].innerHTML),o=document.getElementById("toPageText"),n=parseInt(o.value);if(!isNaN(n)&&n>0&&"0"!==(""+n)[0]&&n<=t){var a="/page/"+n+"/";document.getElementById("toPageButton").href=a}},changeSayHelloText:function(){const e=["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 学习进步小能手","🔨 设计开发一条龙","🤝 热爱开发与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","🎨 分享生活乐趣多"],t=document.getElementById("author-info__sayhi");let o=e[Math.floor(Math.random()*e.length)];for(;o===lastSayHello;)o=e[Math.floor(Math.random()*e.length)];t.textContent=o,lastSayHello=o},scrollCategoryBarToRight:function(){var e=document.getElementById("category-bar-items"),t=document.getElementById("category-bar-next");function o(){t.style.transform=e.scrollLeft+e.clientWidth>=e.scrollWidth?"rotate(180deg)":""}e.addEventListener("scroll",o);var n=e.clientWidth;e&&(e.scrollLeft+e.clientWidth>=e.scrollWidth?(e.scroll({left:0,behavior:"smooth"}),t.style.transform="",e.removeEventListener("scroll",o)):(e.scrollBy({left:n,behavior:"smooth"}),t.style.transform=""))},addRandomCommentInfo:function(){const e=`${adjectives[Math.floor(Math.random()*adjectives.length)]}${vegetablesAndFruits[Math.floor(Math.random()*vegetablesAndFruits.length)]}`;!function(){for(var t=["#author","input[name='comname']","#inpName","input[name='author']","#ds-dialog-name","#name","input[name='nick']","#comment_author"],o=["#mail","#email","input[name='commail']","#inpEmail","input[name='email']","#ds-dialog-email","input[name='mail']","#comment_email"],n=0;n<t.length;n++){var a=document.querySelector(t[n]);if(null!=a){a.value=e,a.dispatchEvent(new Event("input")),a.dispatchEvent(new Event("change"));break}}for(var i=0;i<o.length;i++){var l=document.querySelector(o[i]);if(null!=l){l.value="visitor@bywind.xyz",l.dispatchEvent(new Event("input")),l.dispatchEvent(new Event("change"));break}}}();var t=document.getElementsByClassName("el-textarea__inner")[0];t.focus(),t.setSelectionRange(-1,-1)},addCommentCount:function(e){var t=document.getElementsByClassName("comment-headline");t.length>0&&twikoo.getCommentsCount({envId:"https://twikoo.bywind.xyz",urls:[window.location.pathname],includeReply:!0}).then((function(o){for(var n=0;n<t.length;n++){var a=t[n],i=a.getElementsByTagName("span")[0];if(i){var l=document.createElement("span");l.innerText=" ("+e+")",a.insertBefore(l,i.nextSibling)}}})).catch((function(e){console.error(e)}))}};